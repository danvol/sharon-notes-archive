---
title: 隐含规则
hidden: true
date: 2021-06-24
---

# 隐含规则

- [x] 使用隐含规则
- [x] 隐含规则一览
- [x] 隐含规则使用的变量
  - 关于命令的变量。
  - 关于命令参数的变量
- [x] 隐含规则链
- [x] [定义模式规则](#定义模式规则)
  - 模式规则介绍
  - 模式规则示例
  - [自动化变量](#自动化变量)
  - 模式的匹配
  - [重载内建隐含规则](#重载内建隐含规则)
- [ ] 老式风格的“后缀规则”
- [ ] 隐含规则搜索算法

> ℹ 参考：http://www.gnu.org/software/make/manual/make.html#Implicit-Rules

## 定义模式规则

### 自动化变量

- `$@`：目标文件
- `$%`：[Archives](http://www.gnu.org/software/make/manual/make.html#Archives) 文件
- `$<`：第一个目标
- `$?`：比目标新的依赖文件，列表
- `$^`：依赖文件，去重，列表
- `$+`：依赖文件，不去重，列表
- `$*`：匹配模式前的目标文件或去掉后缀的目标文件

老版加 `D` 或 `F` 限定，如 `$(@F)`，可以用函数 `dir`、`notdir`

### 重载内建隐含规则

```makefile
# 重载隐含规则
%.o : %.c
	$(CC) -c $(CPPFLAGS) $(CFLAGS) -D$(date)
	
# 取消隐含规则
%.o : %.s
```

