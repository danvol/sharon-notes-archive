---
title: 第2章 充分利用命令行
hidden: true
---

# 第2章 充分利用命令行

- [x] 2.1 [管理命令shell的启动方式](#管理命令shell的启动方式)
- [x] 2.2 [使用命令路径进行工作](#使用命令路径进行工作)
  - 2.2.1 [管理命令路径](#管理命令路径)
  - 2.2.2 [管理文件扩展与文件关联](#管理文件扩展与文件关联)
- [x] 2.3 [标准输入、输出及错误日志的重定向](#标准输入、输出及错误日志的重定向)
  - 2.3.1 [将标准输出重定向到其他命令](#将标准输出重定向到其他命令)
  - 2.3.2 I/O与文件的重定向
  - 2.3.3 标准错误输出的重定向
- [x] 2.4 [命令的结链与分组](#命令的结链与分组)
  - 2.4.1 使用命令链
  - 2.4.2 命令分组

## 管理命令shell的启动方式

**命令行的一些基本参数：**

| 参数     | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| `/C`     | 执行指定的命令，之后退出命令shell                            |
| `/K`     | 执行指定的命令，之后仍保持交互模式                           |
| `/A`     | 到文件(或管道)的命令输出设置为ANSI格式(默认设置)             |
| `/U`     | 到文件(或管道)的命令输出设置为Unicode格式                    |
| `/Q`     | 开启静默模式，意味着命令回显被关闭。默认情况下，命令回显是开启的 |
| `/T:fg`  | 为控制台窗口设置前台与背景颜色，这里fg是COLOR命令中定义的两个值 |
| `/E:ON`  | 激活命令扩展(默认设置)                                       |
| `/E:OFF` | 禁用命令扩展                                                 |

> 特殊字符 `<>()&|@^` 用 `^` 转义

## 使用命令路径进行工作

### 管理命令路径

```shell
# 永久设置环境变量 PATH
setx PATH "%PATH%;<添加的路径>"
# 显示环境变量 PATH
path
# 临时设置
path "%PATH%;<添加的路径>"
```

### 管理文件扩展与文件关联

```shell
# 显示可执行文件后缀
set pathext
# 显示或修改文件扩展名关联
assoc
# 显示或修改用在文件扩展名关联中的文件类型
ftype
```

`assoc` 传入文件扩展名，其结果传入 `ftype` 查看执行命令

## 标准输入、输出及错误日志的重定向

**用于输入、输出、错误信息的重定向技术：**

| 重定向技术                               | 描述                                                         |
| ---------------------------------------- | ------------------------------------------------------------ |
| `command1>command2`                      | 将第一个命令的输出作为第二个命令的输入                       |
| `command<[path]filename`                 | 从指定的文件路径中提取命令的输入信息                         |
| `command>[path]filename`                 | 将输出发送到指定的文件,必要的时候需要创建该文件或重写该文件(如果已经存在) |
| `command>>[path]flename`                 | 将输出附加到指定的文件(如果该文件存在)，或者创建该文件并向其写入 |
| `command<[path]filename>[path]flename`   | 从指定的文件中获取命令的输入，之后将命令的输出发送到指定的文件 |
| `command<[path]filename>>[path]filename` | 从指定的文件中获取命令的输入，之后将命令的输出附加到指定的文件 |
| `command2>[path ]filename`               | 创建指定的文件，之后将错误输出信息发送到该文件。如果该文件存在，则其内容会被重写 |
| `command2>&1`                            | 将错误输出信息发送到标准输出                                 |

### 将标准输出重定向到其他命令

管道命令：`command1 | command2`

## 命令的结链与分组

**命令结链、分组语法的快速索引：**

| 符号 | 语法                                     | 描述                                       |
| ---- | ---------------------------------------- | ------------------------------------------ |
| `&`  | `Command l & Command 2`                  | 执行命令1，之后执行命令2                   |
| `&&` | `Command 1 && Command 2`                 | 如果命令1成功完成，则执行命令2             |
| `||` | `Command 1 || Command 2`                 | 只有命令1没有成功完成时才执行命令2         |
| `()` | `(Command 1 & Command 2) && (Command 3)` | 使用括号将命令分组，并根据成功与否条件执行 |
|      | `(Command 1 & Command 2) || (Command 3)` | 使用括号将命令分组，并根据失败与否条件执行 |

